<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./css/theme.css" />
  <link rel="stylesheet" href="./css/comm.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .memorial-day {
      position: fixed;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, .5);
      top: 0;
      left: 0;
      z-index: 9999999;
      display: none;
    }

    .memorial-day .memorial-day-cont {
      position: absolute;
      width: 90%;
      max-width: 500px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .memorial-day .memorial-day-img {
      position: relative;
      z-index: 1;
      width: 100%;
      border-radius: 15px;
    }

    .memorial-day .memorial-day-close {
      position: absolute;
      right: 15px;
      top: 15px;
      z-index: 3;
      cursor: pointer;
      width: 36px;
      height: 36px;
    }

    .memorial-day .memorial-day-close svg {
      display: block;
      width: 100%;
      height: 100%;
    }

    .memorial-day .memorial-day-text {
      position: absolute;
      z-index: 2;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      text-align: center;
      padding: 22px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .memorial-day .memorial-day-text-img {
      width: 100%;
      margin-top: -30%;
    }

    .memorial-day .memorial-day-p {
      color: #1F3367;
      font-size: 26px;
      line-height: 1.2;
      margin: 0;
    }

    .memorial-day .memorial-day-h3 {
      color: #1F3367;
      text-align: center;
      font-size: 40px;
      font-family: var(--heading-font-family);
      font-weight: normal;
      margin: 0;
      line-height: 1.1;
      margin-top: 8px;
      margin-bottom: 10px;
    }

    .memorial-day .memorial-day-btns {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }

    .memorial-day .memorial-day-btn {
      flex: 1;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      color: #FFF;
      font-size: 22px;
      line-height: 1;
      font-family: var(--heading-font-family);
      background: #213E68;
      text-decoration: none;
      transition: all .3s ease-in-out;
    }

    .memorial-day .memorial-day-btn:hover {
      background: #102543;
    }

    .memorial-day .memorial-day-btn:last-child:hover {
      background: #CE0147;
    }


    .memorial-day .memorial-day-btn:last-child {
      background: #E0004D;
    }

    .memorial-day .font22 {
      font-size: 22px;
    }

    @media (max-width:640px) {
      .memorial-day .memorial-day-text {
        padding: 22px;
      }

      .memorial-day .memorial-day-p {
        font-size: 16px;
      }

      .memorial-day .font22 {
        font-size: 16px;
      }

      .memorial-day .memorial-day-h3 {
        font-size: 28px;
        margin-bottom: 10px;
      }

      .memorial-day .memorial-day-btns {
        margin-top: 15px;
      }

      .memorial-day .memorial-day-btn {
        font-size: 14px;
        height: 42px;
      }
    }
  </style>
</head>

<body>
  <div class="memorial-day">
    <div class="memorial-day-cont">
      <img src="https://cdn.shopify.com/s/files/1/0656/9079/6273/files/9164dcef0c91d802bd5d2500e5488bb6.jpg"
        class="memorial-day-img" alt="">
      <div class="memorial-day-close">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
          <path
            d="M23.9999 47.6C36.9233 47.6 47.3999 37.1235 47.3999 24.2C47.3999 11.2766 36.9233 0.800018 23.9999 0.800018C11.0764 0.800018 0.599854 11.2766 0.599854 24.2C0.599854 37.1235 11.0764 47.6 23.9999 47.6Z"
            fill="white" fill-opacity="0.6" />
          <path
            d="M23.9882 25.5923L17.5909 32.0078L16.2 30.6142L22.5985 24.2039L16.2 17.7936L17.5909 16.4L23.9895 22.8103L30.3881 16.4L31.7792 17.7936L25.3806 24.2039L31.7792 30.6142L30.3881 32.0078L23.9882 25.5923Z"
            fill="black" />
        </svg>
      </div>
      <div class="memorial-day-text">
        <img src="https://cdn.shopify.com/s/files/1/0656/9079/6273/files/A10_PC.png" alt=""
          class="memorial-day-text-img">
        <div>
          <div class="memorial-day-p">
            Memorial Day <span style="color: #E0004D;">Sale</span>
          </div>
          <h3 class="memorial-day-h3">Up to <span style="color: #E0004D;">$90 OFF</span> and <br /> limited freebies
          </h3>
          <div class="memorial-day-p font22" style="color: #000;">BUY 1 IPL GET 3 FREEBIES <br /> from May 23 to
            May 26 </div>
          <div class="memorial-day-btns">
            <a href="https://www.ulike.com/pages/heroes-discount" class="memorial-day-btn">HERO DISCOUNT</a>
            <a href="https://www.ulike.com/products/sapphire-air-10-ipl-hair-removal" class="memorial-day-btn">SHOP
              NOW</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // setTimeout(() => {
    //   $('.memorial-day').fadeIn(300);
    // },3000)

    // $('.memorial-day-close').click(() => {
    //   $('.memorial-day').fadeOut(300);
    // })

    // $('.memorial-day').click(() => {
    //   // 排除内容区域
    //   if (event.target !== $('.memorial-day-text')[0]) return;
    //   $('.memorial-day').fadeOut(300);
    // })

    function MemorialDayPopup(options = {}) {
      const popup = document.querySelector('.memorial-day');
      const closeBtn = document.querySelector('.memorial-day-close');
      const content = document.querySelector('.memorial-day-text');
      const delay = options.delay || 3000;

      if (!popup || !closeBtn || !content) return;

      // 显示弹窗
      setTimeout(() => {
        fadeIn(popup, 300);
      }, delay);

      // 关闭按钮点击
      closeBtn.addEventListener('click', () => {
        fadeOut(popup, 300);
      });

      // 点击背景关闭弹窗
      popup.addEventListener('click', (event) => {
        if (!content.contains(event.target)) {
          fadeOut(popup, 300);
        }
      });

      // 封装 fadeIn
      function fadeIn(el, duration) {
        el.style.opacity = 0;
        el.style.display = 'block';
        let last = +new Date();
        const tick = () => {
          el.style.opacity = +el.style.opacity + (new Date() - last) / duration;
          last = +new Date();

          if (+el.style.opacity < 1) {
            requestAnimationFrame(tick);
          } else {
            el.style.opacity = 1;
          }
        };
        tick();
      }

      // 封装 fadeOut
      function fadeOut(el, duration) {
        el.style.opacity = 1;
        let last = +new Date();
        const tick = () => {
          el.style.opacity = +el.style.opacity - (new Date() - last) / duration;
          last = +new Date();

          if (+el.style.opacity > 0) {
            requestAnimationFrame(tick);
          } else {
            el.style.opacity = 0;
            el.style.display = 'none';
          }
        };
        tick();
      }
    }

    MemorialDayPopup({ delay: 3000 });

  </script>
</body>

</html>