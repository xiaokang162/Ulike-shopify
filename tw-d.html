<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./css/theme.css" />
  <link rel="stylesheet" href="./css/comm.css">
  <link rel="stylesheet" href="./css/tw-d.css">
  <script src="./js/jquery.min.js"></script>
</head>
<body>
  <div class="video-slide">
    <div class="video-slide-el">
      <div class="video-slide-video">
        <video src="./images31/pc.mp4" muted autoplay loop></video>
      </div>
      <div class="video-slide-mark">
        <div class="container">
            <div class="video-slide-mark-text">
              <img src="./images31/a1.svg" alt="" class="svg-img">
              <img src="./images31/a2.svg" alt="" class="svg-img">
            </div>
        </div>
      </div>
      <div class="video-slide-mark video-slide-mark-one">
        <div class="container">
          <div class="video-slide-mark-text">
            <img src="./images31/a3.svg" alt="" class="svg-img">
            <img src="./images31/a4.svg" alt="" class="svg-img">
          </div>
        </div>
      </div>
      <div class="video-slide-bottom">
        <p>全球首創雙燈管科技</p>
        <p>雙倍效果，2週見效</p>
      </div>
      <div class="video-slide-bottom video-slide-bottom-one">
        <p>全球首創雙燈管科技</p>
        <p>雙倍效果，2週見效</p>
      </div>
    </div>
  </div>
  <script>
    function videoSlide(){
      let pam = {
        width:'auto',
        clipPath:'polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)'
      }
      if(window.innerWidth <991){
        pam = {
          width:'200%',
          clipPath:'polygon(100% 0, 0% 0, 0% 100%, 100% 100%)'
        }
      }
      ScrollTrigger.create({
        trigger: ".video-slide",
        start: "top top",
        end: "bottom bottom",
        scrub: true,
        // markers:true,
        animation:
        gsap.timeline()
        .to(".video-slide-video",{'scale':1,ease:'power2.inOut'})
        .to(".video-slide-mark-one",{'clip-path':'polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)',ease:'power2.inOut'},'<')
        .to(".video-slide-bottom-one",{'clip-path':'polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)',ease:'power2.inOut'},'<')
        .to(".video-slide-mark-text",{'width':pam.width,ease:'power2.inOut',duration: 0.5},'<')
      })
    }
    window.addEventListener('load', ()=>{
      videoSlide();
    });
  </script>
  <div class="strength-modular">
    <div class="container">
      <div class="strength-modular-cont">
        <div class="strength-modular-title">Ulike Air 10 雙燈管除毛儀</div>
        <div class="strength-modular-sub">4大核心優勢</div>
        <div class="strength-modular-list">
          <div class="strength-modular-item">
            <div class="strength-modular-img">
              <img src="./images31/b1.svg" alt="" class="img">
            </div>
            <div class="strength-modular-p">瞬時雙燈管科技</div>
          </div>
          <div class="strength-modular-item">
            <div class="strength-modular-img">
              <img src="./images31/b2.svg" alt="" class="img">
            </div>
            <div class="strength-modular-p">SHR模式*</div>
          </div>
          <div class="strength-modular-item">
            <div class="strength-modular-img">
              <img src="./images31/b3.svg" alt="" class="img">
            </div>
            <div class="strength-modular-p">藍寶石冰點升級</div>
          </div>
          <div class="strength-modular-item">
            <div class="strength-modular-img">
              <img src="./images31/b4.svg" alt="" class="img">
            </div>
            <div class="strength-modular-p">智能膚色識別</div>
          </div>
        </div>
      </div>
      <div class="strength-modular-msg">*SHR模式是Super Hair Removal 簡稱</div>
    </div>
  </div>
  <div class="officially-sliding officially-sliding-one">
    <div class="officially-sliding-cont">
      <img src="./images31/c2.jpg" alt="" class="img-bg pc-box">
      <img src="./images31/c3.jpg" alt="" class="img-bg mb-box">
      <div class="officially-sliding-det">
        <div class="container">
          <div class="officially-sliding-box officially-sliding-box-one">
            <div class="officially-sliding-title">全球領先Dual-Engine Tech 瞬時雙燈管科技</div>
            <div class="officially-sliding-sub">傳統除毛儀一次打光只有一次脈衝光，“雙燈管”每次打光時發出雙倍更強的脈衝光，從而實現更快、更有效的除毛</div>
            <div class="officially-sliding-svg">
              <svg xmlns="http://www.w3.org/2000/svg" class="pc-box" width="202" height="61" viewBox="0 0 202 61" fill="none">
                <path d="M64.0005 49H202" stroke="#3F3636"/>
                <path d="M56.5581 48.387L8.21006 1.00008" stroke="#3F3636"/>
                <path d="M74.7613 41.0002L55.6868 41.0002L55.6868 49.2722C55.6886 49.7469 55.6942 50.2226 55.7147 50.6963C55.8219 53.1406 56.5342 55.1567 57.818 56.7558C58.8071 57.9891 59.966 58.771 61.2115 59.2885C63.1609 60.0974 65.1494 60.2584 67.1567 59.9037C68.4385 59.6776 69.6803 59.2177 70.8476 58.4014C73.4384 56.5892 74.7921 53.6721 74.7678 49.464C74.7417 44.7653 74.7622 41.0002 74.7622 41.0002L74.7613 41.0002Z" fill="#E0004D"/>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" class="mb-box" width="62" height="106" viewBox="0 0 62 106" fill="none">
                <path d="M6 30.1035L6 105.104" stroke="#3F3636" stroke-width="0.673266"/>
                <path d="M60.8751 3.03174L10.0001 28.7246" stroke="#3F3636" stroke-width="0.673266"/>
                <path d="M12.8422 23.1035L0 23.1035L4.86878e-07 28.6728C0.00125586 28.9924 0.00502194 29.3126 0.0188308 29.6316C0.0910136 31.2772 0.570557 32.6346 1.43487 33.7112C2.10083 34.5415 2.88103 35.0679 3.7196 35.4164C5.03207 35.9609 6.3709 36.0694 7.72228 35.8306C8.58534 35.6783 9.4214 35.3687 10.2072 34.8191C11.9516 33.599 12.8629 31.635 12.8466 28.8018C12.829 25.6384 12.8429 23.1035 12.8429 23.1035L12.8422 23.1035Z" fill="#E0004D"/>
              </svg>
            </div>
          </div>
          <div class="officially-sliding-box officially-sliding-box-two">
            <video src="./images31/pc.mp4" class="officially-sliding-video" autoplay muted loop></video>
            <div class="officially-sliding-svg pc-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="202" height="61" viewBox="0 0 202 61" fill="none">
                <path d="M64.0005 49H202" stroke="#3F3636"/>
                <path d="M56.5581 48.387L8.21006 1.00008" stroke="#3F3636"/>
                <path d="M74.7613 41.0002L55.6868 41.0002L55.6868 49.2722C55.6886 49.7469 55.6942 50.2226 55.7147 50.6963C55.8219 53.1406 56.5342 55.1567 57.818 56.7558C58.8071 57.9891 59.966 58.771 61.2115 59.2885C63.1609 60.0974 65.1494 60.2584 67.1567 59.9037C68.4385 59.6776 69.6803 59.2177 70.8476 58.4014C73.4384 56.5892 74.7921 53.6721 74.7678 49.464C74.7417 44.7653 74.7622 41.0002 74.7622 41.0002L74.7613 41.0002Z" fill="#E0004D"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function officiallySliding(){
      ScrollTrigger.create({
        trigger: ".officially-sliding-one",
        start: "top top",
        end: "bottom bottom",
        scrub: true,
        // markers:true,
        animation:
        gsap.timeline()
        .to(".officially-sliding-one .officially-sliding-box-one",{'transform':'translateY(-100%)','opacity':'0',ease:'power2.inOut'})
        .to(".officially-sliding-one .officially-sliding-box-two",{'display':'block','transform':'translateY(-30%)','opacity':'1',ease:'power2.inOut'})
      })
    }
    window.addEventListener('load', ()=>{
      if(window.innerWidth>991){
        officiallySliding();
      }
    });
  </script>
  <div class="video-top-auto">
    <div class="video-top-auto-el">
      <video src="./images31/v.mp4" muted></video>
    </div>
    <div class="video-top-auto-det">
      <div class="video-top-auto-title">燈頭面積增加</div>
      <div class="video-top-auto-num">18%</div>
      <div class="video-top-auto-p">3.9cm²超大出光口，除毛更高效</div>
    </div>
  </div>
  <script>
    window.addEventListener('load', ()=>{

    })
    class ImgPlay {
      constructor(cont,urlRoot,maxLength) {
        this.urlRoot = urlRoot;
        this.indexRange = [0, maxLength - 1];
        this.maxLength = maxLength
        this.eleContainer = document.querySelector(cont);
        this.percent = 0
        this.store = {
          length: 0
        }
        this.isPlay = false
        this.pictureNum = null
        this.callBack = null
      }

      loadImg(){
        // 图片序列预加载
        for ( let start = this.indexRange[0]; start <= this.indexRange[1]; start++) {
            ((index)=> {
              let that = this
              let img = new Image();
                img.onload = function () {
                    that.store.length++;
                    // 存储预加载的图片对象
                    that.store[index] = this;
                    that.updateLoading();
                };
                img.onerror = function () {
                  that.store.length++;
                  that.updateLoading();
                };
                img.src = that.urlRoot + index + '.jpg';
            })(start);
        }
      }

      updateLoading(){
        // loading进度
        this.percent = Math.round(100 * this.store.length / this.maxLength);
        if(this.percent == 100 && this.isPlay){
          this.playImg(this.pictureNum)
        }
      }

      playImg(num = null,callBack = null){
        if(callBack) this.callBack = callBack
        // 全部加载完毕，无论成功还是失败
        if (this.percent == 100) {
          let index = num || this.indexRange[0];
          this.eleContainer.innerHTML = '';
          // 依次append图片对象
          let step = ()=> {
              if (this.store[index - 1] && num == null) {
                  this.eleContainer.removeChild(this.store[index - 1]);
              }
              this.eleContainer.appendChild(this.store[index]);
              // 序列增加
              index++;
              // 如果超过最大限制
              if (index <= this.indexRange[1]) {
                if(num == null){
                  setTimeout(step, 42);
                }else{

                }
              } else {
                  // 本段播放结束回调
                  if(this.callBack){
                    this.callBack()
                  }
              }
          };
          if(num == null){
            // 等100%动画结束后执行播放
            setTimeout(step, 100);
          }else{
            step()
          }
          
        }else{
          this.isPlay = true
          this.pictureNum = num
        }
      }
    }
    let num = 40
    let imgP = new ImgPlay('.video-top-auto .video-top-auto-el',`./images31/v/${num}/twin-lamps-ulike-`,num)
    if(window.innerWidth<991){
      document.querySelector('.video-top-auto video').remove()
      imgP.loadImg()
      imgP.playImg(0)
    }
    function videoPlay(){
      let $p = document.querySelector('.video-top-auto');
      let reat = $p.getBoundingClientRect();
      let top = reat.top;
      let videoEl = $p.querySelector('.video-top-auto-el')
      let isPlay = $p.getAttribute('is-p')
      let winH = window.innerHeight;

      if(top>0 && top<winH*0.3 && !isPlay){
        $p.setAttribute('is-p','true')
        if(window.innerWidth>991){
          videoEl.querySelector('video').playbackRate = 2;
          videoEl.querySelector('video').play();
          videoEl.querySelector('video').addEventListener('ended', function() {
            $p.querySelector('.video-top-auto-det').style.setProperty('opacity','1')
          });
        }else{
          imgP.playImg(null,function(){
            $p.querySelector('.video-top-auto-det').style.setProperty('opacity','1')
          })
        }
      }
    }
    window.addEventListener('scroll', ()=>{
      videoPlay()
    })
  </script>
  <div class="officially-sliding officially-sliding-two">
    <div class="officially-sliding-cont">
      <img src="./images31/d1.jpg" alt="" class="img-bg pc-box">
      <img src="./images31/d3.jpg" alt="" class="img-bg mb-box">
      <div class="officially-sliding-det">
        <div class="container">
          <div class="officially-sliding-box officially-sliding-box-one">
            <div class="officially-sliding-title">藍寶石冰點技術升級</div>
            <div class="officially-sliding-sub">30分鐘冰點持續保持在16度以內</div>
          </div>
          <div class="officially-sliding-box officially-sliding-box-two">
            <div class="officially-sliding-list">
              <div class="officially-sliding-item">
                <div class="officially-sliding-t">&gt;16°C</div>
                <div class="officially-sliding-p">溫度控製</div>
              </div>
              <div class="officially-sliding-item">
                <div class="officially-sliding-t">30min</div>
                <div class="officially-sliding-p">持續打光時間</div>
              </div>
              <div class="officially-sliding-item">
                <div class="officially-sliding-t">4x</div>
                <div class="officially-sliding-p">冷卻系統</div>
              </div>
            </div>
            <img src="./images31/d2.png" alt="" class="img">
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function officiallySliding1(){
      ScrollTrigger.create({
        trigger: ".officially-sliding-two",
        start: "top top",
        end: "bottom bottom",
        scrub: true,
        markers:true,
        animation:
        gsap.timeline()
        .to(".officially-sliding-two .officially-sliding-box-one",{'transform':'translateY(-100%)','opacity':'0',ease:'power2.inOut'})
        .to(".officially-sliding-two .officially-sliding-box-two",{'display':'block','transform':'translateY(-30%)','opacity':'1',ease:'power2.inOut'})
      })
    }
    window.addEventListener('load', ()=>{
      if(window.innerWidth>991){
        officiallySliding1();
      }
    });
  </script>
  <div class="officially-video">
    <video class="officially-video-el pc-box" src="./images31/pc.mp4" autoplay muted loop></video>
    <video class="officially-video-el mb-box" src="./images31/pc.mp4" autoplay muted loop></video>
    <div class="officially-video-cont">
      <div class="container">
          <div class="officially-video-title">SHR模式 院線除毛科技</div>
          <div class="officially-video-sub">26J 超大能量，1秒4閃， 專脱粗硬毛髮（腋下，比基尼區，鬍鬚）</div>
      </div>
    </div>
    <div class="officially-video-msg">
      <div class="container">*SHR模式是Super Hair Removal 簡稱</div>
    </div>
  </div>
  <div class="officially-effect">
    <img src="./images31/e1.jpg" alt="" class="img pc-box">
    <img src="./images31/e2.jpg" alt="" class="img mb-box">
    <div class="officially-effect-cont">
      <div class="container">
        <div class="officially-effect-title">
          <p>使用1週</p>
          <p>毛髮減少89.63%</p>
        </div>
        <div class="officially-effect-sub">通過熱累積效應，提高除毛效率， 更舒適，更安全</div>
      </div>
    </div>
    <div class="officially-effect-msg">
      <div class="container">
        <div class="officially-effect-msg-txt">
          SGS報告：1周使用SHR模式，比基尼毛髮減少89.63%
        </div>
      </div>
    </div>
  </div>
  <div class="officially-test">
    <div class="container">
      <div class="officially-test-cont">
        <div class="officially-test-left">
          <div class="officially-test-title">智能膚色識別，自動匹配最合適能量</div>
          <div class="officially-test-sub">AIR10皮膚保護科技，專業檢測膚色，自動匹配最佳能量，如果除毛區域過黑，會自動停止打光，保護皮膚。</div>
        </div>
        <div class="officially-test-right">
          <video src="./images31/pc.mp4" class="officially-test-video" autoplay muted loop></video>
        </div>
      </div>
    </div>
  </div>
  <div class="slide-diy">
    <div class="container">
      <div class="slide-diy-cont">
        <div class="slide-diy-left">
          <div class="slide-diy-left-top">
            <div class="slide-diy-img">
              <div class="slide-diy-img-item">
                <img src="./images25/a1.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a3.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a5.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a7.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a9.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a11.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-txt">BEFORE</div>
            </div>
            <div class="slide-diy-img">
              <div class="slide-diy-img-item">
                <img src="./images25/a2.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a4.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a6.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a8.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a10.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-item">
                <img src="./images25/a12.jpg" alt="" class="img">
              </div>
              <div class="slide-diy-img-txt">AFTER</div>
            </div>
          </div>
          <div class="slide-diy-bottom">
            <div class="slide-diy-text">
              <div class="slide-diy-txt-item" text="腋下">
                腋下
              </div>
              <div class="slide-diy-txt-item" text="比基尼">
                比基尼
              </div>
              <div class="slide-diy-txt-item" text="胸部">
                胸部
              </div>
              <div class="slide-diy-txt-item" text="脸部">
                脸部
              </div>
              <div class="slide-diy-txt-item" text="手臂">
                手臂
              </div>
              <div class="slide-diy-txt-item" text="腿部">
                腿部
              </div>
            </div>
          </div>
          <div class="slide-diy-msg-left mb-box">
            注：效果因人而已，請堅持使用
          </div>
          <div class="preheat-video-results-flex mb-box">
            <div class="preheat-video-results-right">
              <div class="preheat-video-results-item">
                <div class="results-right-text number-anime">73.33%</div>
                <div class="results-right-sub">毛髮減少</div>
              </div>
              <div class="preheat-video-results-item">
                <div class="results-right-text number-anime">83.28%</div>
                <div class="results-right-sub">毛髮長度減少</div>
              </div>
              <div class="preheat-video-results-item">
                <div class="results-right-text number-anime">96.52%</div>
                <div class="results-right-sub">毛髮密度減少</div>
              </div>
            </div>
          </div>
        </div>
        <div class="slide-diy-right">
          <div class="slide-diy-top">
            <div class="slide-diy-title">除毛2週見效</div>
            <div class="slide-diy-sub">瑞士SGS-14天真人測評報告</div>
            <div class="preheat-video-results-flex pc-box">
              <div class="preheat-video-results-right">
                <div class="preheat-video-results-item">
                  <div class="results-right-text number-anime">73.33%</div>
                  <div class="results-right-sub">毛髮減少</div>
                </div>
                <div class="preheat-video-results-item">
                  <div class="results-right-text number-anime">83.28%</div>
                  <div class="results-right-sub">毛髮長度減少</div>
                </div>
                <div class="preheat-video-results-item">
                  <div class="results-right-text number-anime">96.52%</div>
                  <div class="results-right-sub">毛髮密度減少</div>
                </div>
              </div>
            </div>
          </div>
          <div class="slide-diy-img-list">
            <div class="slide-diy-list">
              <div class="slide-diy-sm">
                <img src="./images25/a13.jpg" alt="" class="img" data-index="1">
                <div class="slide-diy-sm-txt">腋下</div>
              </div>
              <div class="slide-diy-sm">
                <img src="./images25/a14.jpg" alt="" class="img" data-index="2">
                <div class="slide-diy-sm-txt">比基尼</div>
              </div>
              <div class="slide-diy-sm">
                <img src="./images25/a15.jpg" alt="" class="img" data-index="3">
                <div class="slide-diy-sm-txt">胸部</div>
              </div>
              <div class="slide-diy-sm">
                <img src="./images25/a16.jpg" alt="" class="img" data-index="4">
                <div class="slide-diy-sm-txt">脸部</div>
              </div>
              <div class="slide-diy-sm">
                <img src="./images25/a17.jpg" alt="" class="img" data-index="5">
                <div class="slide-diy-sm-txt">手臂</div>
              </div>
              <div class="slide-diy-sm">
                <img src="./images25/a18.jpg" alt="" class="img" data-index="6">
                <div class="slide-diy-sm-txt">腿部</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="slide-diy-msg pc-box">
      <div class="container">
        注：測試結果是使用SHR模式在比基尼區域，使用效果因人而已，可根據毛髮厚度和硬度調整使用檔位和時間
      </div>
    </div>
  </div>
  <script>
    window.addEventListener('load',function(){
      function slideDiySwiper(){
        const content = document.querySelector('.slide-diy .slide-diy-cont');
        let $p = $('.slide-diy')
        let $imgBox = $p.find('.slide-diy-img')
        let $imgSm = $p.find('.slide-diy-list')
        let $txt = $p.find('.slide-diy-text')
        let $dot = $p.find('.slide-diy-dot-item')
        let length = $imgSm.find('.slide-diy-sm').length
        let width = $imgSm.find('.slide-diy-sm')[0].offsetWidth
        let txtWidth = $txt.find('.slide-diy-txt-item')[0].offsetWidth
        let index = 0
        let smInex = length + index + 1
        let time = +new Date()
        let timerIn = null
        let min = 0
        $imgSm.html($imgSm.html().repeat(3))
        if(window.innerWidth < 991){
          min = 1
        }
        function changeTransform(bol){
          if(index == length){
            index = 0
            $imgSm.css({'transform': 'translateX(-'+ (width + 10) * (length - min) +'px)','transition':'none'})
          }
          if(index == -1){
            index = length - 1
            $imgSm.css({'transform': 'translateX(-'+ (width + 10) * (length + length + 1 - min) +'px)','transition':'none'})
          }
          smInex = length + index + 1 - min
          $imgBox.each(function(){
            $(this).find('.slide-diy-img-item.close').removeClass('close')
            $(this).find('.slide-diy-img-item.active').removeClass('active').addClass('close')
            $(this).find('.slide-diy-img-item').eq(index).addClass('active')
            $('.slide-diy .slide-diy-bottom').removeClass('active')
            setTimeout(()=>{
              $(this).find('.slide-diy-img-item.close').removeClass('close')
              $('.slide-diy .slide-diy-bottom').addClass('active')
            },600)
          })

          $txt.find('.slide-diy-txt-item').css({'transform': 'translateX(-'+ (txtWidth + 100) * index +'px)','transition': 'transform 0.5s cubic-bezier(0.4, 0.2, 0.2, 1)'})
          $dot.removeClass('active').eq(index).addClass('active')
          if(window.innerWidth < 991){
            $imgSm.find('.slide-diy-sm').removeClass('active').eq(smInex).addClass('active')
          }
          setTimeout(() => {
            if(bol){
              $imgSm.css({'transform': 'translateX(-'+ (width + 10) * smInex +'px)'})
            }else{
              $imgSm.css({'transform': 'translateX(-'+ (width + 10) * smInex +'px)','transition': 'transform 0.5s cubic-bezier(0.4, 0.2, 0.2, 1)'})
            }
          }, 10);
          timerIn = setTimeout(function(){
            index++
            changeTransform()
          },3000)
        }
        changeTransform(true)

        $imgSm.on('click','.slide-diy-sm',function(){
          let sindex = $(this).find('.img').attr('data-index')*1 - 1
          let clickTime = +new Date()
          if(clickTime - time<800 || index == sindex) return
          time = +new Date()
          index = sindex
          clearTimeout(timerIn)
          changeTransform()
        })

        detectSwipe(content, () => {
          index +=1
          clearTimeout(timerIn)
          changeTransform()
        }, () => {
          index -=1
          clearTimeout(timerIn)
          changeTransform()
        });


        function detectSwipe(element, onSwipeLeft, onSwipeRight) {
          let startX = 0;

          const getEventX = (event) => {
            return event.touches ? event.touches[0].clientX : event.clientX;
          };

          const handleTouchStart = (e) => {
            startX = getEventX(e);
          };

          const handleTouchMove = (e) => {
            const deltaX = getEventX(e) - startX;
            if (Math.abs(deltaX) > 10 && e.cancelable) {
              e.preventDefault();
            }
          };

          const handleTouchEnd = (e) => {
            const deltaX = getEventX(e.changedTouches ? e.changedTouches[0] : e) - startX;
            if (deltaX > 10) {
              onSwipeRight();
            } else if (deltaX < -10) {
              onSwipeLeft();
            }
          };

          element.addEventListener('touchstart', handleTouchStart);
          element.addEventListener('touchmove', handleTouchMove);
          element.addEventListener('touchend', handleTouchEnd);

          // Add mouse event listeners for PC compatibility
          element.addEventListener('mousedown', handleTouchStart);
          element.addEventListener('mousemove', handleTouchMove);
          element.addEventListener('mouseup', handleTouchEnd);
        }
      }
      slideDiySwiper()
      const numberContainers = document.querySelectorAll('.slide-diy .number-anime');
      animateNumbersWhenVisible(numberContainers);
    })
  </script>
  <div class="preheat-modes">
    <div class="container">
      <div class="preheat-modes-top">
        <div class="preheat-modes-title">4大模式，適用於不同區域除毛</div>
        <div class="preheat-modes-arraw">
          <div class="preheat-modes-arraw-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="27" viewBox="0 0 36 27" fill="none">
              <g clip-path="url(#clip0_860_8661)">
                <path d="M0 13.5094C0 13.7228 0.08078 13.9344 0.235317 14.0961L12.528 26.9983L13.8117 25.825L2.89756 14.3696H36C36 13.42 35.2133 12.6493 34.2439 12.6493H0.918438C0.586536 12.6493 0.263416 12.8127 0.105366 13.1C0.0333672 13.229 0 13.3701 0 13.5094Z" fill="#190A0A"/>
                <path d="M1.83648 10.4938C2.52312 11.1647 3.63473 11.1647 4.3196 10.4938L13.792 1.21625L12.5504 0L1.83824 10.4938H1.83648Z" fill="#190A0A"/>
              </g>
              <defs>
                <clipPath id="clip0_860_8661">
                  <rect width="36" height="27" fill="white" transform="matrix(-1 0 0 1 36 0)"/>
                </clipPath>
              </defs>
            </svg>
          </div>
          <div class="preheat-modes-arraw-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="27" viewBox="0 0 36 27" fill="none">
              <g clip-path="url(#clip0_860_8658)">
                <path d="M36 13.5094C36 13.7228 35.9192 13.9344 35.7647 14.0961L23.472 26.9983L22.1883 25.825L33.1024 14.3696H0C0 13.42 0.786732 12.6493 1.7561 12.6493H35.0816C35.4135 12.6493 35.7366 12.8127 35.8946 13.1C35.9666 13.229 36 13.3701 36 13.5094Z" fill="#190A0A"/>
                <path d="M34.1635 10.4938C33.4769 11.1647 32.3653 11.1647 31.6804 10.4938L22.208 1.21625L23.4496 0L34.1618 10.4938H34.1635Z" fill="#190A0A"/>
              </g>
              <defs>
                <clipPath id="clip0_860_8658">
                  <rect width="36" height="27" fill="white"/>
                </clipPath>
              </defs>
            </svg>
          </div>
        </div>
      </div>
      <div class="preheat-modes-list">
        <div class="preheat-modes-item">
          <div class="preheat-modes-img">
            <img src="./images25/e1.jpg" alt="" class="img">
          </div>
          <div class="preheat-modes-item-title">Fast mode</div>
          <div class="preheat-modes-item-text">雙次閃光，臉部，手部等細軟毛髮</div>
        </div>
        <div class="preheat-modes-item">
          <div class="preheat-modes-img">
            <img src="./images25/e2.jpg" alt="" class="img">
          </div>
          <div class="preheat-modes-item-title">SHR Mode</div>
          <div class="preheat-modes-item-text">四次閃光，比基尼，鬍鬚，腋下等頑固毛髮</div>
        </div>
        <div class="preheat-modes-item">
          <div class="preheat-modes-img">
            <img src="./images25/e3.jpg" alt="" class="img">
          </div>
          <div class="preheat-modes-item-title">High Mode</div>
          <div class="preheat-modes-item-text">雙次閃光，身體粗硬毛髮</div>
        </div>
        <div class="preheat-modes-item">
          <div class="preheat-modes-img">
            <img src="./images25/e4.jpg" alt="" class="img">
          </div>
          <div class="preheat-modes-item-title">Normal Mode</div>
          <div class="preheat-modes-item-text">單次閃光，胳膊，腿等身體毛髮</div>
        </div>
      </div>
    </div>
  </div>
  <script>
    window.addEventListener('load', function() {
      function preheatModesSwiper(){
        let time = +new Date()
        let $p = $('.preheat-modes')
        let $list = $p.find('.preheat-modes-list')
        let $arrowItem = $p.find('.preheat-modes-arraw-item')
        const content = document.querySelector('.preheat-modes .preheat-modes-list');
        let length = $list.find('.preheat-modes-item').length
        let width = $list.find('.preheat-modes-item')[0].offsetWidth
        let index = 0
        let pWidth = $p[0].offsetWidth
        let marginW = window.innerWidth > 991 ? 10:10
        let lWidth = length * (width + marginW) + $list[0].offsetLeft
        let translateX = 0

        function changeTransform(num){
          translateX += (width + marginW) * num
          if(translateX > lWidth - pWidth) {
            translateX = lWidth - pWidth
          }
          if(translateX<0) translateX = 0
          $list.css({
            transform: 'translateX(-' + translateX + 'px)',
            transition: 'all 1s cubic-bezier(0.645, 0.045, 0.355, 1) 0s'
          })
        }

        $arrowItem.click(function(){
          let sindex = $(this).index()
          if(+new Date() - time<1000) return
          time = +new Date()
          changeTransform(sindex?1:-1)
        })

        detectSwipe(content, () => {
          changeTransform(1)
        }, () => {
          changeTransform(-1)
        });
      }

      function detectSwipe(element, onSwipeLeft, onSwipeRight) {
        let startX = 0;

        const getEventX = (event) => {
          return event.touches ? event.touches[0].clientX : event.clientX;
        };

        const handleTouchStart = (e) => {
          startX = getEventX(e);
        };

        const handleTouchMove = (e) => {
          const deltaX = getEventX(e) - startX;
          if (Math.abs(deltaX) > 10 && e.cancelable) {
            e.preventDefault();
          }
        };

        const handleTouchEnd = (e) => {
          const deltaX = getEventX(e.changedTouches ? e.changedTouches[0] : e) - startX;
          if (deltaX > 10) {
            onSwipeRight();
          } else if (deltaX < -10) {
            onSwipeLeft();
          }
        };

        element.addEventListener('touchstart', handleTouchStart);
        element.addEventListener('touchmove', handleTouchMove);
        element.addEventListener('touchend', handleTouchEnd);

        // Add mouse event listeners for PC compatibility
        element.addEventListener('mousedown', handleTouchStart);
        element.addEventListener('mousemove', handleTouchMove);
        element.addEventListener('mouseup', handleTouchEnd);
      }

      preheatModesSwiper()
    })
  </script>
  <div class="IPL-no1">
    <div class="container">
      <div class="IPL-no1-cont">
        <div class="IPL-no1-left">
          <div class="IPL-no1-sub">全球銷量*</div>
          <div class="IPL-no1-color-title" style="--deg-num:-76deg;">No. 1</div>
        </div>
        <div class="IPL-no1-right">
          <div class="IPL-no1-item">
            <div class="IPL-no1-num" text="项"><span>400</span></div>
            <div class="IPL-no1-p">全球專利</div>
          </div>
          <div class="IPL-no1-item">
            <div class="IPL-no1-num" text="年"><span>10</span></div>
            <div class="IPL-no1-p">IPL技術</div>
          </div>
          <div class="IPL-no1-item">
            <div class="IPL-no1-num"><span>500W</span></div>
            <div class="IPL-no1-p">銷量</div>
          </div>
        </div>
      </div>
    </div>
    <div class="IPL-no1-msg">
      <div class="container">*欧睿报告2022年销量第一</div>
    </div>
  </div>
  <script>
    function textAm() {
      let $box = document.querySelector('.IPL-no1 .IPL-no1-color-title')
      let num = -76
      function step() {
        num += 1.5
        if (num > 284) num = -76
        $box.style = '--deg-num:' + num + 'deg;'
        requestAnimationFrame(step);
      }
      step()
    }
    textAm()
    function animateNumbersWhenVisible(elements) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const element = entry.target;
            const start = 0;
            const end = parseInt(element.textContent.match(/\d+/)[0]);
            const duration = Math.max(800, Math.min(2000, Math.abs(end - start) * 20)); // 根据数字的大小调整动画时间，最小1000毫秒，最大4000毫秒
            animateNumber(element, start, end, duration);
            observer.unobserve(element); // 仅触发一次动画后停止观察
          }
        });
      });

      elements.forEach(element => {
        observer.observe(element);
      });
    }

    function animateNumber(element, start, end, duration) {
      const initialValue = element.textContent;
      let startTime = null;
      const step = (timestamp) => {
        if (!startTime) startTime = timestamp;
        const progress = Math.min((timestamp - startTime) / duration, 1);
        const value = Math.floor(progress * (end - start) + start);
        const newValue = initialValue.replace(/\d+/, value.toString().padStart(initialValue.match(/\d+/)[0].length, '0'));
        element.textContent = newValue;
        if (progress < 1) {
          requestAnimationFrame(step);
        }
      };
      requestAnimationFrame(step);
    }

    const numberContainers = document.querySelectorAll('.IPL-no1 .IPL-no1-num span');
    animateNumbersWhenVisible(numberContainers);
    window.addEventListener('load', () => {

    })
  </script>
</body>
<script src="./js/script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
</html>