<style>
  .sub-activity-box {
    padding-bottom: 100px;
    background: #fff;
    position: relative;
    z-index: 3;
  }

  .sub-activity-box .sub-activity-list {
    display: flex;
  }

  .sub-activity-box .sub-activity-left,
  .sub-activity-box .sub-activity-right {
    flex: 1;
  }

  .sub-activity-box .sub-activity-left {
    margin-right: 18px;
  }

  .sub-activity-box .sub-activity-right {
    display: flex;
    flex-direction: column;
  }

  .sub-activity-box .sub-activity-right .sub-activity-item {
    flex: 1;
  }

  .sub-activity-box .sub-activity-right .sub-activity-item:first-child {
    margin-bottom: 18px;
  }

  .sub-activity-box .sub-activity-item {
    width: 100%;
    position: relative;
  }

  .sub-activity-box .sub-activity-item:nth-child(2n) {
    margin-right: 0;
  }

  .sub-activity-box .sub-activity-item .img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: relative;
    z-index: 1;
  }

  .sub-activity-box .sub-activity-cont {
    position: absolute;
    width: 100%;
    height: 100%;
    padding: 45px;
    display: flex;
    align-items: center;
    top: 0;
    left: 0;
    z-index: 2;
  }

  .sub-activity-box .sub-activity-left .sub-activity-cont {
    align-items: flex-end;
  }

  .sub-activity-box .sub-activity-title {
    font-size: 35px;
    color: #fff;
    font-weight: bold;
    line-height: 1.2;
  }

  .sub-activity-box .sub-activity-title p {
    margin: 0;
  }

  .sub-activity-box .sub-activity-p {
    font-size: 16px;
    color: #fff;
    margin-top: 12px;
    line-height: 1.2;
  }

  .sub-activity-box .sub-activity-p p {
    margin: 0;
  }

  .sub-activity-box .sub-activity-btn {
    width: 168px;
    height: 52px;
    font-size: 16px;
    color: #000;
    background: #fff;
    margin-top: 35px;
  }

  .sub-activity-box .sub-activity-btn::after {
    background: #000;
  }

  .sub-activity-box .sub-activity-btn:hover span,
  .sub-activity-box .sub-activity-btn:hover .btn-txt::before {
    color: #fff;
  }

  .sub-activity-box .sub-activity-dot {
    display: none;
    justify-content: center;
  }

  .sub-activity-box .sub-activity-dot-item {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin: 0 8px;
    background: #e9e9e9;
    transition: all 0.4s ease;
  }

  .sub-activity-box .sub-activity-dot-item.active {
    background: #000;
  }

  @media (max-width: 1600px) {
    .sub-activity-box .sub-activity-title {
      font-size: 30px;
    }
  }

  @media (max-width: 1490px) {
    .sub-activity-box .sub-activity-title {
      font-size: 25px;
    }

    .sub-activity-box .sub-activity-p {
      font-size: 15px;
    }
  }

  @media (max-width: 1300px) {
    .sub-activity-box .sub-activity-cont {
      padding: 30px;
    }
  }

  @media (max-width: 1200px) {
    .sub-activity-box .sub-activity-title {
      /* font-size: 20px; */
    }

    .sub-activity-box .sub-activity-p {
      font-size: 14px;
    }

    .sub-activity-box .sub-activity-btn {
      width: 140px;
      height: 45px;
      margin-top: 20px;
    }
  }

  @media (max-width: 991px) {
    .sub-activity-box {
      overflow: hidden;
      padding-bottom: 50px;
    }

    .sub-activity-box .sub-activity-list {
      display: block;
    }

    .sub-activity-box .sub-activity-item {
      width: 100%;
      margin-right: 0;
    }

    .sub-activity-box .sub-activity-left {
      margin-right: -24px;
      margin-left: -24px;
      margin-bottom: 30px;
    }

    .sub-activity-box .sub-activity-cont {
      align-items: flex-end;
      justify-content: center;
      text-align: center;
    }

    .sub-activity-box .sub-activity-btn {
      margin: 0 auto;
      margin-top: 15px;
    }

    .sub-activity-box .sub-activity-title br {
      display: none;
    }

    .sub-activity-box .sub-activity-dot {
      display: flex;
      margin-top: 30px;
    }

    .sub-activity-box .sub-activity-right {
      flex-direction: row;
    }

    .sub-activity-box .sub-activity-right .sub-activity-item {
      flex: auto;
      width: 100%;
      flex-shrink: 0;
      margin-right: 30px;
    }

    .sub-activity-box .sub-activity-right .sub-activity-item:first-child {
      margin-bottom: 0;
    }
  }
</style>
<section class="section-box">
  <div class="sub-activity-box">
    <div class="container">
      <div class="sub-activity-list">
        <div class="sub-activity-left">
          {%- for block in section.blocks -%}
            {%- if forloop.index == 1 -%}
              <div class="sub-activity-item to-top" style="transition-delay: 0.{{forloop.index}}s">
                {%- if block.settings.image != blank and block.settings.image1 != blank -%}
                  <picture>
                    <source srcset="{{ block.settings.image1 }}" media="(max-width: 991px)">
                    <source srcset="{{ block.settings.image }}" media="(min-width: 992px)">
                    <img loading="lazy" width="{{ block.settings.image.width }}" height="{{ block.settings.image.height }}" {%
                      render 'image-attributes' , image: block.settings.image %} alt="{{ block.settings.image.alt | escape }}">
                  </picture>
                {%- endif -%}
                <div class="sub-activity-cont">
                  <div>
                    <div class="sub-activity-title text-top" style="transition-delay: 0.3s">{{ block.settings.title }}</div>
                    <div class="sub-activity-p text-top" style="transition-delay: 0.4s">
                      {{ block.settings.content }}
                    </div>
                    {%- if block.settings.btn_text != blank -%}
                      <a href="{{ block.settings.link }}" class="sub-activity-btn btn-diy text-top-btn" style="transition-delay: 1s">
                        <div class="btn-txt" text="{{ block.settings.btn_text }}">
                          <span>{{ block.settings.btn_text }}</span>
                        </div>
                      </a>
                    {%- endif -%}
                  </div>
                </div>
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
        <div class="sub-activity-right">
          {%- for block in section.blocks -%}
            {%- if forloop.index != 1 -%}
            <div class="sub-activity-item to-top" style="transition-delay: 0.{{forloop.index}}s">
              {%- if block.settings.image != blank and block.settings.image1 != blank -%}
                <picture>
                  <source srcset="{{ block.settings.image1 }}" media="(max-width: 991px)">
                  <source srcset="{{ block.settings.image }}" media="(min-width: 992px)">
                  <img loading="lazy" width="{{ block.settings.image.width }}" height="{{ block.settings.image.height }}" {%
                    render 'image-attributes' , image: block.settings.image %} alt="{{ block.settings.image.alt | escape }}">
                </picture>
              {%- endif -%}
              <div class="sub-activity-cont">
                <div>
                  <div class="sub-activity-title text-top" style="transition-delay: 0.3s">
                    <div>
                      {{ block.settings.title }}
                    </div>
                  </div>
                  <div class="sub-activity-p text-top" style="transition-delay: 0.4s">
                    {{ block.settings.content }}
                  </div>
                  {%- if block.settings.btn_text != blank -%}
                    <a href="{{ block.settings.link }}" class="sub-activity-btn btn-diy text-top-btn" style="transition-delay: 1s">
                      <div class="btn-txt" text="{{ block.settings.btn_text }}">
                        <span>{{ block.settings.btn_text }}</span>
                      </div>
                    </a>
                  {%- endif -%}
                </div>
              </div>
            </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
      </div>
      <div class="sub-activity-dot">
        <div class="sub-activity-dot-item active"></div>
        <div class="sub-activity-dot-item"></div>
      </div>
    </div>
  </div>
</section>
<script>
  function subActivitySlider() {
    let $p = $('#shopify-section-{{ section.id }}')
    let $list = $p.find('.sub-activity-right')
    let length = $list.find('.sub-activity-item').length
    let index = 0
    let timer = null

    $p.find('.sub-activity-dot-item').click(function () {
      let btnIndex = $(this).index()
      index = btnIndex
      changeTranslateX()
    })

    function changeTranslateX() {
      let width = $list.find('.sub-activity-item').width() + 30
      if (index == length) index = 0
      $list.css({ 'transform': 'translateX(-' + width * index + 'px)', 'transition': ' all .4s ease' })
      $p.find('.sub-activity-dot-item').removeClass('active').eq(index).addClass('active')
    }
    timer = setInterval(() => {
      index++
      changeTranslateX()
    }, 4800)
    window.addEventListener('resize', function () {
      if (window.innerWidth > 992) {
        clearInterval(timer)
        $list.css({ 'transform': 'translateX(0px)' })
      }
    })
    function initMobileCarousel() {
      let startX = 0;
      let startY = 0;
      let isScrolling = false;

      $list.on('touchstart', function (e) {
        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
        startX = touch.clientX;
        startY = touch.clientY;
        isScrolling = false;
        clearInterval(timer)
      });

      $list.on('touchmove', function (e) {
        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
        var diffX = touch.clientX - startX;
        var diffY = touch.clientY - startY;
        if (!isScrolling) {
          if (Math.abs(diffX) > Math.abs(diffY)) {
            isScrolling = true;
          }
        }

        if (isScrolling && e.cancelable) {
          e.preventDefault();
        }
      });

      $list.on('touchend', function (e) {
        isScrolling = false
        if (!isScrolling) {
          var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
          var diffX = touch.clientX - startX;
          if (Math.abs(diffX) > window.innerWidth * 0.05) {
            index++
            changeTranslateX()
          }
          timer = setInterval(() => {
            index++
            changeTranslateX()
          }, 4800)
        }
      });
    }
    initMobileCarousel()
  }
  if (window.innerWidth < 991) {
    subActivitySlider()
  }
</script>
{% schema %}
{
"name": "sub-activity-diy",
"blocks": [
  {
  "name": "item",
  "type": "item",
  "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "image_picker",
        "id": "image1",
        "label": "Mobile Image"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      },
      {
        "type": "richtext",
        "id": "content",
        "label": "Content"
      },
      {
        "type": "text",
        "id": "btn_text",
        "label": "Button Text"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Button Link"
      }
    ]
  }
],
"presets": [
    {
      "name": "sub-activity-diy",
      "blocks": []
    }
  ]
}
{% endschema %}